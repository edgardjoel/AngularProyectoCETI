"use strict";(self.webpackChunkfinal_project_angular=self.webpackChunkfinal_project_angular||[]).push([[379],{1379:(Z,u,a)=>{a.r(u),a.d(u,{PagesModule:()=>T});var p=a(9808),i=a(3370),t=a(1223),h=a(7556);let d=(()=>{class r{constructor(e,n){this.authService=e,this.router=n}canActivate(){return!!this.authService.isLoggedIn()||this.redirectToLogin()}canLoad(){return!0}redirectToLogin(){return this.router.navigateByUrl("/auth/login"),!1}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(h.e),t.LFG(i.F0))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var g=a(520),v=a(9646),l=a(4004),_=a(262),m=a(9019);let f=(()=>{class r{constructor(e){this._http=e,this.baseUrl=m.N.baseUrl,this.apiUrl=m.N.apiUrl}getCharacters(){return this._http.get(this.apiUrl).pipe((0,l.U)(n=>n.results))}addFavorite(e){return this._http.post(`${this.baseUrl}/api/favorite/newFavorite`,e).pipe((0,l.U)(c=>c.ok),(0,_.K)(c=>(alert("Personaje ya est\xe1 en favoritos"),(0,v.of)(c.error))))}getFavorites(){const e=`${this.baseUrl}/api/favorite/${localStorage.getItem("userId")}`;return this._http.get(e).pipe((0,l.U)(n=>n.favoritos))}deleteFavorite(e,n){const c=`${this.baseUrl}/api/favorite/deleteFavorite`,s={headers:new g.WM({"Content-Type":"application/json"}),body:{IdCharacter:e,IdUser:n}};return this._http.delete(c,s)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(g.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function C(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"section",2)(1,"p",3),t._uU(2),t.ALo(3,"slice"),t.qZA(),t._UZ(4,"img",4),t.TgZ(5,"button",5),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().addFavorite(s)}),t._uU(6,"ADD TO FAVORITES"),t.qZA()()}if(2&r){const e=o.$implicit;t.xp6(2),t.hij(" ",e.name.length<=12?e.name:t.Dn7(3,2,e.name,0,12)+"..."," "),t.xp6(2),t.Q6J("src",e.image,t.LSH)}}let x=(()=>{class r{constructor(e,n){this._apiService=e,this.router=n,this.characters=[]}ngOnInit(){this._apiService.getCharacters().subscribe(e=>{this.characters=e})}addFavorite(e){let n={IdCharacter:e.id,IdUser:localStorage.getItem("userId"),nameCharacter:e.name,caracterUrlImagen:e.image,token:localStorage.getItem("token")};this._apiService.addFavorite(n).subscribe(c=>{0!=c&&this.router.navigateByUrl("/pages/favorites")})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f),t.Y36(i.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-characters"]],decls:2,vars:1,consts:[[1,"container-characters"],["class","container-characters__item",4,"ngFor","ngForOf"],[1,"container-characters__item"],[1,"container-characters__item__character-name"],["alt","",1,"container-characters__item__img",3,"src"],[1,"container-characters__item__button",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,C,7,6,"section",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.characters))},directives:[p.sg],pipes:[p.OU],styles:[".container-characters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:10px;gap:10px}.container-characters__item[_ngcontent-%COMP%]{padding:30px}.container-characters__item__img[_ngcontent-%COMP%]{width:100%}.container-characters__item__button[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:10px;color:#fff;font-size:19px;background-color:#01c4c4;cursor:pointer}.container-characters__item__character-name[_ngcontent-%COMP%]{width:100%;text-align:center;font-weight:700}"]}),r})();function F(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"section",2),t._uU(1),t._UZ(2,"img",3),t.TgZ(3,"button",4),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().removeFavorite(s)}),t._uU(4,"Remove favorite"),t.qZA()()}if(2&r){const e=o.$implicit;t.xp6(1),t.hij(" ",e.nameCharacter," "),t.xp6(1),t.Q6J("src",e.caracterUrlImagen,t.LSH)}}let b=(()=>{class r{constructor(e,n){this.router=e,this.apiService=n,this.favorites=[]}ngOnInit(){this.apiService.getFavorites().subscribe(e=>{this.favorites=e})}removeFavorite(e){this.apiService.deleteFavorite(e.IdCharacter,e.IdUser).subscribe(n=>{this.apiService.getFavorites().subscribe(c=>{this.favorites=c,alert("Accion realizada correctamente")})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(i.F0),t.Y36(f))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-favorites"]],decls:2,vars:1,consts:[[1,"container-characters"],["class","item",4,"ngFor","ngForOf"],[1,"item"],["alt","",3,"src"],[1,"btn-add-favorite",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,F,5,2,"section",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.favorites))},directives:[p.sg],styles:[".container-characters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:20px;gap:20px}.item[_ngcontent-%COMP%]{padding:30px}.item[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%}.btn-add-favorite[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;border-radius:10px;color:#fff;font-size:19px;background-color:#a0003d;cursor:pointer}.btn-back[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;border-radius:10px;color:#fff;font-size:19px;background-color:#750085;cursor:pointer}"]}),r})(),y=(()=>{class r{constructor(e){this.router=e,this.nameUser=""}ngOnInit(){this.nameUser=localStorage.getItem("name")}cerrarSesion(){localStorage.clear(),this.router.navigateByUrl("/auth/login")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(i.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-header"]],decls:10,vars:1,consts:[[1,"flex-container"],[1,"flex-container__routes"],["routerLink","/pages/characters"],["routerLink","/pages/favorites"],[1,"flex-container__btn-close-session",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"p",2),t._uU(5,"Personajes"),t.qZA(),t.TgZ(6,"p",3),t._uU(7,"Favorites"),t.qZA()(),t.TgZ(8,"button",4),t.NdJ("click",function(){return n.cerrarSesion()}),t._uU(9,"Cerrar sesi\xf3n"),t.qZA()()),2&e&&(t.xp6(2),t.hij("Usuario: ",n.nameUser,""))},directives:[i.rH],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:1rem;padding-right:1rem;align-items:center;background-color:#6c6cfc}.flex-container__routes[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.flex-container__routes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:1rem;background-color:#0ff;padding:.5rem;border-radius:8px}.flex-container__routes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{cursor:pointer}.flex-container__btn-close-session[_ngcontent-%COMP%]{width:auto;padding:10px;border:none;border-radius:10px;color:#fff;font-size:19px;background-color:#9b16a2;cursor:pointer}"]}),r})(),P=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-footer"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"footer works!"),t.qZA())},styles:[""]}),r})();const U=[{path:"",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-pages"]],decls:3,vars:0,template:function(e,n){1&e&&t._UZ(0,"app-header")(1,"router-outlet")(2,"app-footer")},directives:[y,i.lC,P],styles:[""]}),r})(),children:[{path:"",redirectTo:"characters",pathMatch:"full"},{path:"characters",component:x,canActivate:[d]},{path:"favorites",component:b,canActivate:[d]}]}];let O=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[i.Bz.forChild(U)],i.Bz]}),r})();var M=a(4466);let T=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[p.ez,O,M.m]]}),r})()}}]);