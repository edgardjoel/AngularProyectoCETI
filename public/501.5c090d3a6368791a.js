"use strict";(self.webpackChunkclase3g4=self.webpackChunkclase3g4||[]).push([[501],{6501:(I,d,i)=>{i.r(d),i.d(d,{PersonajesModule:()=>U});var s=i(9808),c=i(3370),t=i(1223),g=i(7556);let l=(()=>{class o{constructor(e,r){this.authService=e,this.router=r}canActivate(){return!!this.authService.isLoggedIn()||this.redirectToLogin()}redirectToLogin(){return this.router.navigateByUrl("/auth/login"),!1}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.e),t.LFG(c.F0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var m=i(520),f=i(2340),u=i(4004),h=i(262),_=i(9646);let v=(()=>{class o{constructor(e){this._http=e,this.url=`${f.N.urlApi}/api/favorite`}addFavorite(e){return this._http.post(`${this.url}/newFavorite`,e).pipe((0,u.U)(a=>a.ok),(0,h.K)(a=>(alert("Personaje ya est\xe1 en favoritos"),(0,_.of)(a.error))))}getFavorites(){const e=`${this.url}/${localStorage.getItem("userId")}`;return this._http.get(e).pipe((0,u.U)(r=>r.favoritos))}removeFavorite(e,r){const a=`${this.url}/deleteFavorite`,p={headers:new m.WM({"Content-Type":"application/json"}),body:{IdCharacter:e,IdUser:r}};return this._http.delete(a,p)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(m.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function C(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",3)(2,"h3"),t._uU(3),t.ALo(4,"slice"),t.qZA(),t._UZ(5,"img",4)(6,"br"),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){const p=t.CHM(e).$implicit;return t.oxw(2).removeFavorite(p)}),t._uU(9,"REMOVE"),t.qZA(),t.TgZ(10,"p"),t._uU(11,"Hola"),t.qZA()()()()}if(2&o){const e=n.$implicit;t.xp6(3),t.Oqu((null==e.nameCharacter?null:e.nameCharacter.length)>15?t.Dn7(4,2,e.nameCharacter,0,15)+"..":e.nameCharacter),t.xp6(2),t.Q6J("src",e.caracterUrlImagen,t.LSH)}}function F(o,n){if(1&o&&(t.TgZ(0,"div",1),t.YNc(1,C,12,6,"div",2),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.favorites)}}let T=(()=>{class o{constructor(e){this._apiService=e,this.favorites=[]}ngOnInit(){this._apiService.getFavorites().subscribe(e=>{this.favorites=e})}removeFavorite(e){this._apiService.removeFavorite(e.IdCharacter,e.IdUser).subscribe(r=>{this._apiService.getFavorites().subscribe(a=>{this.favorites=a,alert("Acci\xf3n realizada correctamente")})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-favoritos"]],decls:3,vars:1,consts:[["class","container parent",4,"ngIf"],[1,"container","parent"],[4,"ngFor","ngForOf"],[1,"parent__item"],["alt","",3,"src"],[1,"parent__item__footer-card"],[1,"btn","btn-danger",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"h1"),t._uU(1,"FAVORITOS"),t.qZA(),t.YNc(2,F,2,1,"div",0)),2&e&&(t.xp6(2),t.Q6J("ngIf",r.favorites.length>0))},directives:[s.O5,s.sg],pipes:[s.OU],styles:['@charset "UTF-8";.parent[_ngcontent-%COMP%]{display:grid;grid-gap:20px;gap:20px;grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}.parent__item[_ngcontent-%COMP%]{padding-right:2rem;color:#042d5d}.parent__item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:30px;width:100%}.parent__item__footer-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.parent__item__footer-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}']}),o})();var y=i(9470);let x=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-footer"]],decls:2,vars:0,template:function(e,r){1&e&&(t.TgZ(0,"h3"),t._uU(1,"This is footer"),t.qZA())},styles:[""]}),o})(),O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-personajes"]],decls:3,vars:0,template:function(e,r){1&e&&t._UZ(0,"app-header")(1,"router-outlet")(2,"app-footer")},directives:[y.G,c.lC,x],styles:[""]}),o})();var P=i(727),A=i(2199);function j(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",2)(2,"h3"),t._uU(3),t.ALo(4,"slice"),t.qZA(),t._UZ(5,"img",3)(6,"br"),t.TgZ(7,"div",4)(8,"button",5),t.NdJ("click",function(){const p=t.CHM(e).$implicit;return t.oxw().addFavorite(p)}),t._uU(9,"FAV"),t.qZA(),t.TgZ(10,"p"),t._uU(11,"Hola"),t.qZA()()()()}if(2&o){const e=n.$implicit;t.xp6(3),t.Oqu(e.name.length>15?t.Dn7(4,2,e.name,0,15)+"..":e.name),t.xp6(2),t.Q6J("src",e.image,t.LSH)}}const M=[{path:"",component:O,children:[{path:"todos",component:(()=>{class o{constructor(e,r,a){this.pokemonService=e,this._apiService=r,this._router=a,this.subscriptionApi$=new P.w0,this.personajes=[]}ngOnInit(){this.subscriptionApi$=this.pokemonService.getPersonajes().subscribe(e=>{this.personajes=e})}addFavorite(e){let r={IdCharacter:e.id,IdUser:localStorage.getItem("userId"),nameCharacter:e.name,caracterUrlImagen:e.image,token:localStorage.getItem("token")};this._apiService.addFavorite(r).subscribe(a=>{0!=a&&this._router.navigateByUrl("/personaje/favoritos")})}ngOnDestroy(){this.subscriptionApi$.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.f),t.Y36(v),t.Y36(c.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-todos"]],decls:4,vars:1,consts:[[1,"container","parent"],[4,"ngFor","ngForOf"],[1,"parent__item"],["alt","",3,"src"],[1,"parent__item__footer-card"],[1,"btn","btn-primary",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"h1"),t._uU(1,"PERSONAJES"),t.qZA(),t.TgZ(2,"div",0),t.YNc(3,j,12,6,"div",1),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",r.personajes))},directives:[s.sg],pipes:[s.OU],styles:['@charset "UTF-8";.parent[_ngcontent-%COMP%]{display:grid;grid-gap:20px;gap:20px;grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}.parent__item[_ngcontent-%COMP%]{padding-right:2rem;color:#042d5d}.parent__item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:30px;width:100%}.parent__item__footer-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.parent__item__footer-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}']}),o})(),canActivate:[l]},{path:"favoritos",component:T,canActivate:[l]},{path:"",redirectTo:"todos",pathMatch:"full"}]}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.Bz.forChild(M)],c.Bz]}),o})();var S=i(4466);let U=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.ez,Z,S.m]]}),o})()}}]);